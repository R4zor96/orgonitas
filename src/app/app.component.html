<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Orgonitas Sagradas</title>
  </head>
  <body>
    <!-- NAV -->
    <nav class="navbar navbar-expand-lg custom-navbar sticky-top shadow-sm">
      <div class="container">
        <a class="navbar-brand" href="#">
          Orgonitas Sagradas
        </a>
        <button
          class="navbar-toggler text-light"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#menu"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="menu">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link" href="#inicio">Inicio</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#que-es">Â¿QuÃ© es?</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#productos">Productos</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#contacto">Contacto</a>
            </li>

            <!-- Ãcono del carrito -->
            <li class="nav-item">
              <!-- <a
                class="nav-link position-relative"
                href="#"
                (click)="openCartModal(cartModal)"
              >
                ðŸ›’
                <span
                  class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"
                  >{{ contadorCarrito }}</span
                >
              </a> -->
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- HERO CON PATRÃ“N -->
    <section id="inicio" class="hero-cracked d-flex align-items-center">
      <div class="container text-center">
        <h1 class="display-4 fw-bold">Descubre el poder de las Orgonitas</h1>
        <p class="lead">ProtecciÃ³n, armonÃ­a y energÃ­a positiva en tu vida</p>
        <a href="#productos" class="btn btn-custom mt-3">Ver productos</a>
      </div>
    </section>

    <!-- Â¿QUÃ‰ ES UNA ORGONITA? -->
    <section id="que-es" class="section-light">
      <div class="container">
        <div class="row align-items-center">
          <div class="col-md-6 mb-4 mb-md-0">
            <img
              src="./recursos/Que_es.jpg"
              class="img-fluid rounded"
              alt="Orgonita explicada"
            />
          </div>
          <div class="col-md-6">
            <h2>Â¿QuÃ© es una Orgonita?</h2>
            <p>
              Una orgonita es un dispositivo de energÃ­a hecho con resina,
              metales y cristales que armoniza los campos energÃ©ticos del
              entorno. Es usada para mejorar el bienestar, reducir el estrÃ©s y
              elevar la vibraciÃ³n del espacio donde se encuentra.
            </p>
            <p>Ideal para tu hogar, oficina o como un regalo con intenciÃ³n.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- PRODUCTOS -->
    <section id="productos" class="section-dark">
      <div class="container">
        <h2 class="text-center mb-4">Nuestros Productos</h2>

        <!-- Filtros -->
        <div class="row mb-3">
          <div class="col-md-4 mb-2">
            <input
              type="text"
              class="form-control"
              placeholder="Buscar por nombre..."
              [(ngModel)]="filterNombre"
              (input)="applyFilters()"
            />
          </div>
          <div class="col-md-4 mb-2">
            <input
              type="number"
              class="form-control"
              placeholder="Precio mÃ­nimo"
              [(ngModel)]="filterPrecioMin"
              (input)="applyFilters()"
            />
          </div>
          <div class="col-md-4 mb-2">
            <input
              type="number"
              class="form-control"
              placeholder="Precio mÃ¡ximo"
              [(ngModel)]="filterPrecioMax"
              (input)="applyFilters()"
            />
          </div>
          <div class="col-md-6 mb-2">
            <select class="form-select" [(ngModel)]="ordenarPor" (change)="applyFilters()">
              <option value="">Ordenar por...</option>
              <option value="precio-asc">Precio (menor a mayor)</option>
              <option value="precio-desc">Precio (mayor a menor)</option>
              <option value="nombre-asc">Nombre (A-Z)</option>
              <option value="nombre-desc">Nombre (Z-A)</option>
            </select>
          </div>
          <div class="col-md-6 mb-2 text-md-end">
            <button class="btn btn-secondary w-100" (click)="limpiarFiltros()">
              Limpiar filtros
            </button>
          </div>
        </div>

        <!-- Productos -->
        <div class="row g-4">
          <!-- Mensaje si no hay productos -->
          <div *ngIf="filteredProducts.length === 0" class="text-center mt-4">
            <p>No se encontraron productos.</p>
          </div>

          <!-- Lista de productos -->
          <div *ngFor="let product of filteredProducts" class="col-md-4">
            <div class="product-card p-3 text-center">
              <img
                [src]="product.imagen"
                class="img-fluid mb-3"
                [alt]="product.nombre"
              />
              <h5>{{ product.nombre }}</h5>
              <p>{{ product.precio | currency:'MXN' }}</p>
              <button class="btn btn-custom" (click)="openProductModal(productModal, product)">
                Comprar
              </button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Modal de producto (usando ng-bootstrap) -->
    <ng-template #productModal let-modal>
      <div class="modal-content bg-dark text-white">
        <div class="modal-header border-secondary">
          <h5 class="modal-title">{{ selectedProduct?.nombre }}</h5>
          <button type="button" class="btn-close btn-close-white" (click)="modal.dismiss()" aria-label="Cerrar"></button>
        </div>
        <div class="modal-body d-flex flex-column flex-md-row align-items-center gap-4">
          <img
            [src]="selectedProduct?.imagen"
            alt="Imagen Producto"
            class="img-fluid rounded shadow"
            style="max-width: 300px"
          />
          <div>
            <h4>{{ selectedProduct?.nombre }}</h4>
            <p class="fw-bold text-success">{{ selectedProduct?.precio | currency:'MXN' }}</p>
            <p class="text-light">{{ selectedProduct?.descripcion }}</p>
            <div class="mb-2">
              <label for="modal-cantidad" class="form-label">Cantidad:</label>
              <input
                type="number"
                class="form-control border-gold bg-dark text-white rounded-3 shadow-sm"
                [(ngModel)]="cantidad"
                min="1"
                style="width: 100px"
              />
            </div>
            <button class="btn btn-custom mt-2" (click)="agregarAlCarrito(); modal.close()">
              Agregar al carrito
            </button>
          </div>
        </div>
      </div>
    </ng-template>
    <!-- Modal del carrito (usando ng-bootstrap) -->
    <ng-template #cartModal let-modal>
      <div class="modal-content bg-dark text-white">
        <div class="modal-header border-secondary">
          <h5 class="modal-title">Tu carrito</h5>
          <button type="button" class="btn-close btn-close-white" (click)="modal.dismiss()"></button>
        </div>
        <div class="modal-body">
          <ul class="list-group mb-3">
            <li *ngFor="let item of carrito; let i = index" class="list-group-item d-flex justify-content-between align-items-center bg-dark text-white border-secondary">
              <div class="d-flex align-items-center">
                <img [src]="item.imagen" alt="{{ item.nombre }}" class="me-3 rounded" style="width: 50px; height: 50px; object-fit: cover;">
                <div>
                  <strong>{{ item.nombre }}</strong><br>
                  <small>{{ item.precio | currency:'MXN' }} x {{ item.cantidad }}</small>
                </div>
              </div>
              <div>
                <span class="fw-bold">{{ (item.precio * item.cantidad) | currency:'MXN' }}</span>
                <button class="btn btn-sm btn-danger ms-2" (click)="eliminarDelCarrito(i)">Ã—</button>
              </div>
            </li>
          </ul>
          <div class="text-end fw-bold">
            Total: {{ totalCarrito | currency:'MXN' }}
          </div>
        </div>
        <div class="modal-footer border-secondary">
          <button class="btn btn-success" (click)="finalizarCompra(); modal.close()">Finalizar compra</button>
          <button class="btn btn-secondary" (click)="modal.dismiss()">Cerrar</button>
        </div>
      </div>
    </ng-template>

    <!-- CONTACTO -->
    <section id="contacto" class="section-light">
      <div class="container text-center">
        <h2>ContÃ¡ctanos</h2>
        <p>
          Â¿Tienes dudas o deseas un diseÃ±o personalizado? EscrÃ­benos vÃ­a
          WhatsApp o Instagram.
        </p>
        <a href="https://wa.me/521XXXXXXXXXX" class="btn btn-custom me-2"
          >WhatsApp</a
        >
        <a href="https://instagram.com/tu_cuenta" class="btn btn-custom"
          >Instagram</a
        >
      </div>
    </section>

    <!-- FOOTER -->
    <footer>
      <div class="container text-center">
        <p>&copy; 2025 Orgonitas Sagradas Â· DiseÃ±ado con intenciÃ³n y amor</p>
        <p>
          <a href="#inicio">Inicio</a> Â· <a href="#productos">Productos</a> Â·
          <a href="#contacto">Contacto</a>
        </p>
      </div>
    </footer>

    <router-outlet />
  </body>
</html>
